{"ast":null,"code":"import React,{useState}from\"react\";import{Form,Button}from\"react-bootstrap\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{useUserActions}from\"../../hooks/user.actions\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(){const navigate=useNavigate();const[validated,setValidated]=useState(false);const[form,setForm]=useState({});const[error,setError]=useState(null);const userActions=useUserActions();const handleSubmit=event=>{event.preventDefault();const loginForm=event.currentTarget;if(loginForm.checkValidity()===false){event.stopPropagation();}setValidated(true);const data={email:form.email,password:form.password};userActions.login(data).catch(err=>{if(err.message){setError(err.request.response);}});axios.post(\"https://ed-5827941652496384.educative.run/api/auth/login/\",data).then(res=>{// Registering the account and tokens in the store\nlocalStorage.setItem(\"auth\",JSON.stringify({access:res.data.access,refresh:res.data.refresh,user:res.data.user}));navigate(\"/\");}).catch(err=>{if(err.message){setError(err.request.response);}});};return/*#__PURE__*/_jsxs(Form,{id:\"registration-form\",className:\"border p-4 rounded\",noValidate:true,validated:validated,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{value:form.email,onChange:e=>setForm({...form,email:e.target.value}),required:true,type:\"text\",placeholder:\"Enter email\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"This file is required.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{value:form.password,minLength:\"8\",onChange:e=>setForm({...form,password:e.target.value}),required:true,type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please provide a valid password.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-content text-danger\",children:error&&/*#__PURE__*/_jsx(\"p\",{children:error})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Submit\"})]});}export default LoginForm;","map":{"version":3,"names":["React","useState","Form","Button","axios","useNavigate","useUserActions","jsx","_jsx","jsxs","_jsxs","LoginForm","navigate","validated","setValidated","form","setForm","error","setError","userActions","handleSubmit","event","preventDefault","loginForm","currentTarget","checkValidity","stopPropagation","data","email","password","login","catch","err","message","request","response","post","then","res","localStorage","setItem","JSON","stringify","access","refresh","user","id","className","noValidate","onSubmit","children","Group","Label","Control","value","onChange","e","target","required","type","placeholder","Feedback","minLength","variant"],"sources":["/Users/yashrajsingh/Django App/momento/src/components/authentication/LoginForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Button } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { useUserActions } from \"../../hooks/user.actions\";\n\nfunction LoginForm() {\n  const navigate = useNavigate();\n  const [validated, setValidated] = useState(false);\n  const [form, setForm] = useState({});\n  const [error, setError] = useState(null);\n  const userActions = useUserActions();\n\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const loginForm = event.currentTarget;\n\n    if (loginForm.checkValidity() === false) {\n      event.stopPropagation();\n    }\n\n    setValidated(true);\n\n    const data = {\n      email: form.email,\n      password: form.password,\n    };\n\n    userActions.login(data).catch((err) => {\n      if (err.message) {\n        setError(err.request.response);\n      }\n    });\n\n    axios\n      .post(\"https://ed-5827941652496384.educative.run/api/auth/login/\", data)\n      .then((res) => {\n        // Registering the account and tokens in the store\n        localStorage.setItem(\"auth\", JSON.stringify({\n        access: res.data.access,\n        refresh: res.data.refresh,\n        user: res.data.user,\n      }));\n      navigate(\"/\");\n      })\n      .catch((err) => {\n        if (err.message) {\n          setError(err.request.response);\n        }\n      });\n    };\n\n    return (\n    <Form\n      id=\"registration-form\"\n      className=\"border p-4 rounded\"\n      noValidate\n      validated={validated}\n      onSubmit={handleSubmit}\n    >\n      <Form.Group className=\"mb-3\">\n        <Form.Label>Email</Form.Label>\n        <Form.Control\n          value={form.email}\n          onChange={(e) => setForm({ ...form, email: e.target.value })}\n          required\n          type=\"text\"\n          placeholder=\"Enter email\"\n        />\n        <Form.Control.Feedback type=\"invalid\">\n          This file is required.\n        </Form.Control.Feedback>\n      </Form.Group>\n\n      <Form.Group className=\"mb-3\">\n        <Form.Label>Password</Form.Label>\n        <Form.Control\n          value={form.password}\n          minLength=\"8\"\n          onChange={(e) => setForm({ ...form, password: e.target.value })}\n          required\n          type=\"password\"\n          placeholder=\"Password\"\n        />\n        <Form.Control.Feedback type=\"invalid\">\n          Please provide a valid password.\n        </Form.Control.Feedback>\n      </Form.Group>\n\n      <div className=\"text-content text-danger\">{error && <p>{error}</p>}</div>\n\n      <Button variant=\"primary\" type=\"submit\">\n        Submit\n      </Button>\n    </Form>\n  );\n}\n\nexport default LoginForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}