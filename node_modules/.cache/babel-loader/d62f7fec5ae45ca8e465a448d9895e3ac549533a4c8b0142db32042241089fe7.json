{"ast":null,"code":"import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import axiosService from\"../helpers/axios\";function useUserActions(){const navigate=useNavigate();const baseURL=process.env.REACT_APP_API_URL;return{login,register,logout,edit};// Login the user\nfunction login(data){return axios.post(`${baseURL}/auth/login/`,data).then(res=>{// Registering the account and tokens in the store\nsetUserData(res.data);navigate(\"/\");});}// Register the user\nfunction register(data){return axios.post(`${baseURL}/auth/register/`,data).then(res=>{// Registering the account and tokens in the store\nsetUserData(res.data);navigate(\"/\");});}// Edit the user\nfunction edit(data,userId){return axiosService.patch(`${baseURL}/user/${userId}/`,data,{headers:{\"content-type\":\"multipart/form-data\"}}).then(res=>{// Registering the account in the store\nlocalStorage.setItem(\"auth\",JSON.stringify({access:getAccessToken(),refresh:getRefreshToken(),user:res.data}));});}// Logout the user\nfunction logout(){localStorage.removeItem(\"auth\");navigate(\"/login\");}}// Get the user\nfunction getUser(){const auth=JSON.parse(localStorage.getItem(\"auth\"))||null;if(auth){return auth.user;}else{return null;}}// Get the access token\nfunction getAccessToken(){const auth=JSON.parse(localStorage.getItem(\"auth\"));return auth.access;}// Get the refresh token\nfunction getRefreshToken(){const auth=JSON.parse(localStorage.getItem(\"auth\"));return auth.refresh;}// Set the access, token and user property\nfunction setUserData(data){localStorage.setItem(\"auth\",JSON.stringify({access:data.access,refresh:data.refresh,user:data.user}));}export{useUserActions,getUser,getAccessToken,getRefreshToken};","map":{"version":3,"names":["axios","useNavigate","axiosService","useUserActions","navigate","baseURL","process","env","REACT_APP_API_URL","login","register","logout","edit","data","post","then","res","setUserData","userId","patch","headers","localStorage","setItem","JSON","stringify","access","getAccessToken","refresh","getRefreshToken","user","removeItem","getUser","auth","parse","getItem"],"sources":["/Users/yashrajsingh/Django App/momento/src/hooks/user.actions.js"],"sourcesContent":["import axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport axiosService from \"../helpers/axios\";\n\nfunction useUserActions() {\n  const navigate = useNavigate();\n  const baseURL = process.env.REACT_APP_API_URL;\n\n  return {\n    login,\n    register,\n    logout,\n    edit\n  };\n\n  // Login the user\n  function login(data) {\n    return axios.post(`${baseURL}/auth/login/`, data).then((res) => {\n      // Registering the account and tokens in the store\n      setUserData(res.data);\n      navigate(\"/\");\n    });\n  }\n\n  // Register the user\n  function register(data) {\n    return axios.post(`${baseURL}/auth/register/`, data).then((res) => {\n      // Registering the account and tokens in the store\n      setUserData(res.data);\n      navigate(\"/\");\n    });\n  }\n\n  // Edit the user\n  function edit(data, userId) {\n    return axiosService\n      .patch(`${baseURL}/user/${userId}/`, data, {\n        headers: {\n          \"content-type\": \"multipart/form-data\",\n        },\n      })\n      .then((res) => {\n        // Registering the account in the store\n        localStorage.setItem(\n          \"auth\",\n          JSON.stringify({\n            access: getAccessToken(),\n            refresh: getRefreshToken(),\n            user: res.data,\n          })\n        );\n      });\n  }\n\n  // Logout the user\n  function logout() {\n    localStorage.removeItem(\"auth\");\n    navigate(\"/login\");\n  }\n}\n\n// Get the user\nfunction getUser() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\")) || null;\n  if (auth) {\n    return auth.user;\n  } else {\n    return null;\n  }\n}\n\n// Get the access token\nfunction getAccessToken() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\n  return auth.access;\n}\n\n// Get the refresh token\nfunction getRefreshToken() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\n  return auth.refresh;\n}\n\n// Set the access, token and user property\nfunction setUserData(data) {\n  localStorage.setItem(\n    \"auth\",\n    JSON.stringify({\n      access: data.access,\n      refresh: data.refresh,\n      user: data.user,\n    })\n  );\n}\n\nexport { useUserActions, getUser, getAccessToken, getRefreshToken };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}