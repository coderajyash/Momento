{"ast":null,"code":"import React,{useState,useContext}from\"react\";import{Form,Button,Image}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{useUserActions}from\"../../hooks/user.actions\";import{Context}from\"../Layout\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateProfileForm(props){const{profile}=props;const navigate=useNavigate();const[validated,setValidated]=useState(false);const[form,setForm]=useState(profile);const[error,setError]=useState(null);const userActions=useUserActions();const[avatar,setAvatar]=useState();const{setToaster}=useContext(Context);const handleSubmit=event=>{event.preventDefault();const updateProfileForm=event.currentTarget;if(updateProfileForm.checkValidity()===false){event.stopPropagation();}setValidated(true);const data={first_name:form.first_name,last_name:form.last_name,bio:form.bio};const formData=new FormData();// Checking for null values in the form and removing it.\nObject.keys(data).forEach(key=>{if(data[key]){formData.append(key,data[key]);}});if(avatar){formData.append(\"avatar\",avatar);}userActions.edit(formData,profile.id).then(()=>{setToaster({type:\"success\",message:\"Profile updated successfully ðŸš€\",show:true,title:\"Profile updated\"});navigate(-1);}).catch(err=>{if(err.message){setError(err.request.response);}});};return/*#__PURE__*/_jsxs(Form,{id:\"registration-form\",className:\"border p-4 rounded\",noValidate:true,validated:validated,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3 d-flex flex-column\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"text-center\",children:\"Avatar\"}),/*#__PURE__*/_jsx(Image,{src:form.avatar,roundedCircle:true,width:120,height:120,className:\"m-2 border border-primary border-2 align-self-center\"}),/*#__PURE__*/_jsx(Form.Control,{onChange:e=>setAvatar(e.target.files[0]),className:\"w-50 align-self-center\",type:\"file\",size:\"sm\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"This file is required.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"First Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:form.first_name,onChange:e=>setForm({...form,first_name:e.target.value}),required:true,type:\"text\",placeholder:\"Enter first name\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"This file is required.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last name\"}),/*#__PURE__*/_jsx(Form.Control,{value:form.last_name,onChange:e=>setForm({...form,last_name:e.target.value}),required:true,type:\"text\",placeholder:\"Enter last name\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"This file is required.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Bio\"}),/*#__PURE__*/_jsx(Form.Control,{value:form.bio,onChange:e=>setForm({...form,bio:e.target.value}),as:\"textarea\",rows:3,placeholder:\"A simple bio ... (Optional)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-content text-danger\",children:error&&/*#__PURE__*/_jsx(\"p\",{children:error})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Save changes\"})]});}export default UpdateProfileForm;","map":{"version":3,"names":["React","useState","useContext","Form","Button","Image","useNavigate","useUserActions","Context","jsx","_jsx","jsxs","_jsxs","UpdateProfileForm","props","profile","navigate","validated","setValidated","form","setForm","error","setError","userActions","avatar","setAvatar","setToaster","handleSubmit","event","preventDefault","updateProfileForm","currentTarget","checkValidity","stopPropagation","data","first_name","last_name","bio","formData","FormData","Object","keys","forEach","key","append","edit","id","then","type","message","show","title","catch","err","request","response","className","noValidate","onSubmit","children","Group","Label","src","roundedCircle","width","height","Control","onChange","e","target","files","size","Feedback","value","required","placeholder","as","rows","variant"],"sources":["/Users/yashrajsingh/Django App/backend/momento/src/components/profile/UpdateProfileForm.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Form, Button, Image } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { useUserActions } from \"../../hooks/user.actions\";\nimport { Context } from \"../Layout\";\n\nfunction UpdateProfileForm(props) {\n  const { profile } = props;\n\n  const navigate = useNavigate();\n\n  const [validated, setValidated] = useState(false);\n  const [form, setForm] = useState(profile);\n  const [error, setError] = useState(null);\n  const userActions = useUserActions();\n\n  const [avatar, setAvatar] = useState();\n\n  const { setToaster } = useContext(Context);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const updateProfileForm = event.currentTarget;\n\n    if (updateProfileForm.checkValidity() === false) {\n      event.stopPropagation();\n    }\n\n    setValidated(true);\n\n    const data = {\n      first_name: form.first_name,\n      last_name: form.last_name,\n      bio: form.bio,\n    };\n\n    const formData = new FormData();\n\n    // Checking for null values in the form and removing it.\n\n    Object.keys(data).forEach((key) => {\n      if (data[key]) {\n        formData.append(key, data[key]);\n      }\n    });\n\n    if (avatar) {\n      formData.append(\"avatar\", avatar);\n    }\n\n    userActions\n      .edit(formData, profile.id)\n      .then(() => {\n        setToaster({\n          type: \"success\",\n          message: \"Profile updated successfully ðŸš€\",\n          show: true,\n          title: \"Profile updated\",\n        });\n        navigate(-1);\n      })\n      .catch((err) => {\n        if (err.message) {\n          setError(err.request.response);\n        }\n      });\n  };\n  return (\n    <Form\n      id=\"registration-form\"\n      className=\"border p-4 rounded\"\n      noValidate\n      validated={validated}\n      onSubmit={handleSubmit}\n    >\n      <Form.Group className=\"mb-3 d-flex flex-column\">\n        <Form.Label className=\"text-center\">Avatar</Form.Label>\n        <Image\n          src={form.avatar}\n          roundedCircle\n          width={120}\n          height={120}\n          className=\"m-2 border border-primary border-2 align-self-center\"\n        />\n        <Form.Control\n          onChange={(e) => setAvatar(e.target.files[0])}\n          className=\"w-50 align-self-center\"\n          type=\"file\"\n          size=\"sm\"\n        />\n        <Form.Control.Feedback type=\"invalid\">\n          This file is required.\n        </Form.Control.Feedback>\n      </Form.Group>\n      <Form.Group className=\"mb-3\">\n        <Form.Label>First Name</Form.Label>\n        <Form.Control\n          value={form.first_name}\n          onChange={(e) => setForm({ ...form, first_name: e.target.value })}\n          required\n          type=\"text\"\n          placeholder=\"Enter first name\"\n        />\n        <Form.Control.Feedback type=\"invalid\">\n          This file is required.\n        </Form.Control.Feedback>\n      </Form.Group>\n      <Form.Group className=\"mb-3\">\n        <Form.Label>Last name</Form.Label>\n        <Form.Control\n          value={form.last_name}\n          onChange={(e) => setForm({ ...form, last_name: e.target.value })}\n          required\n          type=\"text\"\n          placeholder=\"Enter last name\"\n        />\n        <Form.Control.Feedback type=\"invalid\">\n          This file is required.\n        </Form.Control.Feedback>\n      </Form.Group>\n      <Form.Group className=\"mb-3\">\n        <Form.Label>Bio</Form.Label>\n        <Form.Control\n          value={form.bio}\n          onChange={(e) => setForm({ ...form, bio: e.target.value })}\n          as=\"textarea\"\n          rows={3}\n          placeholder=\"A simple bio ... (Optional)\"\n        />\n      </Form.Group>\n\n      <div className=\"text-content text-danger\">{error && <p>{error}</p>}</div>\n\n      <Button variant=\"primary\" type=\"submit\">\n        Save changes\n      </Button>\n    </Form>\n  );\n}\n\nexport default UpdateProfileForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}