{"ast":null,"code":"import axios from\"axios\";import createAuthRefreshInterceptor from\"axios-auth-refresh\";import{getAccessToken,getRefreshToken}from\"../hooks/user.actions\";const axiosService=axios.create({baseURL:process.env.REACT_APP_API_URL,headers:{\"Content-Type\":\"application/json\"}});axiosService.interceptors.request.use(async config=>{/**\n    * Retrieving the access token from the localStorage and adding it to the headers of the request\n  */const{access}=JSON.parse(localStorage.getItem(\"auth\"));config.headers.Authorization=`Bearer ${getAccessToken()}`;return config;});axiosService.interceptors.response.use(res=>Promise.resolve(res),err=>Promise.reject(err));const refreshAuthLogic=async failedRequest=>{const{refresh}=JSON.parse(localStorage.getItem(\"auth\"));return axios.post(\"/refresh/token/\",null,{baseURL:process.env.REACT_APP_API_URL,headers:{Authorization:`Bearer ${getRefreshToken()}`}}).then(resp=>{const{access,refresh,user}=resp.data;failedRequest.response.config.headers[\"Authorization\"]=\"Bearer \"+access;localStorage.setItem(\"auth\",JSON.stringify({access,refresh,user}));}).catch(()=>{localStorage.removeItem(\"auth\");});};createAuthRefreshInterceptor(axiosService,refreshAuthLogic);export function fetcher(url){return axiosService.get(url).then(res=>res.data);}export default axiosService;","map":{"version":3,"names":["axios","createAuthRefreshInterceptor","getAccessToken","getRefreshToken","axiosService","create","baseURL","process","env","REACT_APP_API_URL","headers","interceptors","request","use","config","access","JSON","parse","localStorage","getItem","Authorization","response","res","Promise","resolve","err","reject","refreshAuthLogic","failedRequest","refresh","post","then","resp","user","data","setItem","stringify","catch","removeItem","fetcher","url","get"],"sources":["/Users/yashrajsingh/Django App/momento/src/helpers/axios.js"],"sourcesContent":["import axios from \"axios\";\nimport createAuthRefreshInterceptor from \"axios-auth-refresh\";\nimport {\n  getAccessToken,\n  getRefreshToken,\n} from \"../hooks/user.actions\";\n\nconst axiosService = axios.create({\n  baseURL: process.env.REACT_APP_API_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\naxiosService.interceptors.request.use(async (config) => {\n  /**\n    * Retrieving the access token from the localStorage and adding it to the headers of the request\n  */\n  const { access } = JSON.parse(localStorage.getItem(\"auth\"));\n  config.headers.Authorization = `Bearer ${getAccessToken()}`;\n  return config;\n});\n\naxiosService.interceptors.response.use(\n  (res) => Promise.resolve(res),\n  (err) => Promise.reject(err)\n);\n\nconst refreshAuthLogic = async (failedRequest) => {\n    const { refresh } = JSON.parse(localStorage.getItem(\"auth\"));\n    return axios\n        .post(\"/refresh/token/\", null, {\n            baseURL: process.env.REACT_APP_API_URL,\n            headers: {\n                Authorization: `Bearer ${getRefreshToken()}`,\n            },\n        })\n        .then((resp) => {\n            const { access, refresh, user } = resp.data;\n            failedRequest.response.config.headers[\"Authorization\"] = \"Bearer \" + access;\n            localStorage.setItem(\"auth\", JSON.stringify({access, refresh, user }));\n        })\n        .catch(() => {\n            localStorage.removeItem(\"auth\");\n        });\n};\n\ncreateAuthRefreshInterceptor(axiosService, refreshAuthLogic);\n\nexport function fetcher(url) {\n  return axiosService.get(url).then((res) => res.data);\n}\n\nexport default axiosService;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,4BAA4B,KAAM,oBAAoB,CAC7D,OACEC,cAAc,CACdC,eAAe,KACV,uBAAuB,CAE9B,KAAM,CAAAC,YAAY,CAAGJ,KAAK,CAACK,MAAM,CAAC,CAChCC,OAAO,CAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CACtCC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEFN,YAAY,CAACO,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,KAAO,CAAAC,MAAM,EAAK,CACtD;AACF;AACA,IACE,KAAM,CAAEC,MAAO,CAAC,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAC3DL,MAAM,CAACJ,OAAO,CAACU,aAAa,CAAG,UAAUlB,cAAc,CAAC,CAAC,EAAE,CAC3D,MAAO,CAAAY,MAAM,CACf,CAAC,CAAC,CAEFV,YAAY,CAACO,YAAY,CAACU,QAAQ,CAACR,GAAG,CACnCS,GAAG,EAAKC,OAAO,CAACC,OAAO,CAACF,GAAG,CAAC,CAC5BG,GAAG,EAAKF,OAAO,CAACG,MAAM,CAACD,GAAG,CAC7B,CAAC,CAED,KAAM,CAAAE,gBAAgB,CAAG,KAAO,CAAAC,aAAa,EAAK,CAC9C,KAAM,CAAEC,OAAQ,CAAC,CAAGb,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAC5D,MAAO,CAAAnB,KAAK,CACP8B,IAAI,CAAC,iBAAiB,CAAE,IAAI,CAAE,CAC3BxB,OAAO,CAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CACtCC,OAAO,CAAE,CACLU,aAAa,CAAE,UAAUjB,eAAe,CAAC,CAAC,EAC9C,CACJ,CAAC,CAAC,CACD4B,IAAI,CAAEC,IAAI,EAAK,CACZ,KAAM,CAAEjB,MAAM,CAAEc,OAAO,CAAEI,IAAK,CAAC,CAAGD,IAAI,CAACE,IAAI,CAC3CN,aAAa,CAACP,QAAQ,CAACP,MAAM,CAACJ,OAAO,CAAC,eAAe,CAAC,CAAG,SAAS,CAAGK,MAAM,CAC3EG,YAAY,CAACiB,OAAO,CAAC,MAAM,CAAEnB,IAAI,CAACoB,SAAS,CAAC,CAACrB,MAAM,CAAEc,OAAO,CAAEI,IAAK,CAAC,CAAC,CAAC,CAC1E,CAAC,CAAC,CACDI,KAAK,CAAC,IAAM,CACTnB,YAAY,CAACoB,UAAU,CAAC,MAAM,CAAC,CACnC,CAAC,CAAC,CACV,CAAC,CAEDrC,4BAA4B,CAACG,YAAY,CAAEuB,gBAAgB,CAAC,CAE5D,MAAO,SAAS,CAAAY,OAAOA,CAACC,GAAG,CAAE,CAC3B,MAAO,CAAApC,YAAY,CAACqC,GAAG,CAACD,GAAG,CAAC,CAACT,IAAI,CAAET,GAAG,EAAKA,GAAG,CAACY,IAAI,CAAC,CACtD,CAEA,cAAe,CAAA9B,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}