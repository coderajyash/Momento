{"ast":null,"code":"import React,{useState,useContext}from\"react\";import{Button,Form,Image}from\"react-bootstrap\";import axiosService from\"../../helpers/axios\";import{getUser}from\"../../hooks/user.actions\";import{randomAvatar}from\"../../utils\";import{Context}from\"../Layout\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CreateComment(props){const{postId,refresh}=props;const[avatar,setAvatar]=useState(randomAvatar());const[validated,setValidated]=useState(false);const[form,setForm]=useState({});const{setToaster}=useContext(Context);const user=getUser();const handleSubmit=event=>{event.preventDefault();const createCommentForm=event.currentTarget;if(createCommentForm.checkValidity()===false){event.stopPropagation();}setValidated(true);const data={author:user.id,body:form.body,post:postId};axiosService.post(`api/post/${postId}/comment/`,data).then(()=>{setForm({...form,body:\"\"});setToaster({type:\"success\",message:\"Comment posted successfullyðŸš€\",show:true,title:\"Comment!\"});refresh();}).catch(()=>{setToaster({type:\"danger\",message:\"\",show:true,title:\"An error occurred.!\"});});};return/*#__PURE__*/_jsxs(Form,{className:\"d-flex flex-row justify-content-between\",noValidate:true,validated:validated,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Image,{src:user.avatar,roundedCircle:true,width:48,height:48,className:\"my-2\"}),/*#__PURE__*/_jsx(Form.Group,{className:\"m-3 w-75\",children:/*#__PURE__*/_jsx(Form.Control,{className:\"py-2 rounded-pill border-primary\",type:\"text\",placeholder:\"Write a comment\",value:form.body,name:\"body\",onChange:e=>setForm({...form,body:e.target.value})})}),/*#__PURE__*/_jsx(\"div\",{className:\"m-auto\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,disabled:form.body===undefined,size:\"small\",children:\"Comment\"})})]});}export default CreateComment;","map":{"version":3,"names":["React","useState","useContext","Button","Form","Image","axiosService","getUser","randomAvatar","Context","jsx","_jsx","jsxs","_jsxs","CreateComment","props","postId","refresh","avatar","setAvatar","validated","setValidated","form","setForm","setToaster","user","handleSubmit","event","preventDefault","createCommentForm","currentTarget","checkValidity","stopPropagation","data","author","id","body","post","then","type","message","show","title","catch","className","noValidate","onSubmit","children","src","roundedCircle","width","height","Group","Control","placeholder","value","name","onChange","e","target","variant","onClick","disabled","undefined","size"],"sources":["/Users/yashrajsingh/Django App/momento/src/components/comments/CreateComment.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Button, Form, Image } from \"react-bootstrap\";\nimport axiosService from \"../../helpers/axios\";\nimport { getUser } from \"../../hooks/user.actions\";\nimport { randomAvatar } from \"../../utils\";\n\nimport { Context } from \"../Layout\";\n\nfunction CreateComment(props) {\n  const { postId, refresh } = props;\n  const [avatar, setAvatar] = useState(randomAvatar());\n  const [validated, setValidated] = useState(false);\n  const [form, setForm] = useState({});\n\n  const { setToaster } = useContext(Context);\n\n  const user = getUser();\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const createCommentForm = event.currentTarget;\n\n    if (createCommentForm.checkValidity() === false) {\n      event.stopPropagation();\n    }\n\n    setValidated(true);\n\n    const data = {\n      author: user.id,\n      body: form.body,\n      post: postId,\n    };\n\n    axiosService\n      .post(`api/post/${postId}/comment/`, data)\n      .then(() => {\n        setForm({ ...form, body: \"\" });\n        setToaster({\n          type: \"success\",\n          message: \"Comment posted successfullyðŸš€\",\n          show: true,\n          title: \"Comment!\",\n        });\n        refresh();\n      })\n      .catch(() => {\n        setToaster({\n          type: \"danger\",\n          message: \"\",\n          show: true,\n          title: \"An error occurred.!\",\n        });\n      });\n  };\n\n  return (\n    <Form\n      className=\"d-flex flex-row justify-content-between\"\n      noValidate\n      validated={validated}\n      onSubmit={handleSubmit}\n    >\n      <Image\n        src={user.avatar}\n        roundedCircle\n        width={48}\n        height={48}\n        className=\"my-2\"\n      />\n      <Form.Group className=\"m-3 w-75\">\n        <Form.Control\n          className=\"py-2 rounded-pill border-primary\"\n          type=\"text\"\n          placeholder=\"Write a comment\"\n          value={form.body}\n          name=\"body\"\n          onChange={(e) => setForm({ ...form, body: e.target.value })}\n        />\n      </Form.Group>\n      <div className=\"m-auto\">\n        <Button\n          variant=\"primary\"\n          onClick={handleSubmit}\n          disabled={form.body === undefined}\n          size=\"small\"\n        >\n          Comment\n        </Button>\n      </div>\n    </Form>\n  );\n}\n\nexport default CreateComment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}