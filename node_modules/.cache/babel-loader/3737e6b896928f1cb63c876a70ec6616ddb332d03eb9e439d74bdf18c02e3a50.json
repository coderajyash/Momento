{"ast":null,"code":"import React,{useContext}from\"react\";import{format}from\"timeago.js\";import{LikeFilled,CommentOutlined,LikeOutlined,MoreOutlined}from\"@ant-design/icons\";import{Link}from\"react-router-dom\";import{Image,Card,Dropdown}from\"react-bootstrap\";import{randomAvatar}from\"../../utils\";import axiosService from\"../../helpers/axios\";import{getUser}from\"../../hooks/user.actions\";import UpdatePost from\"./UpdatePost\";import{Context}from\"../Layout\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MoreToggleIcon=/*#__PURE__*/React.forwardRef((_ref,ref)=>{let{onClick}=_ref;return/*#__PURE__*/_jsx(\"a\",{href:\"#\",ref:ref,onClick:e=>{e.preventDefault();onClick(e);},children:/*#__PURE__*/_jsx(MoreOutlined,{})});});function Post(props){const{post,refresh,isSinglePost}=props;const{setToaster}=useContext(Context);const user=getUser();const handleLikeClick=action=>{axiosService.post(`api/post/${post.id}/${action}/`).then(()=>{refresh();}).catch(err=>console.error(err));};const handleDelete=()=>{axiosService.delete(`api/post/${post.id}/`).then(()=>{setToaster({type:\"warning\",message:\"Post deleted ðŸš€\",show:true,title:\"Post Deleted\"});refresh();}).catch(()=>{setToaster({type:\"danger\",message:\"An error occurred.\",show:true,title:\"Post Error\"});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Card,{className:\"rounded-3 my-4\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{className:\"d-flex flex-row justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(Image,{src:post.author.avatar,roundedCircle:true,width:48,height:48,className:\"me-2 border border-primary border-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column justify-content-start align-self-center mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"fs-6 m-0\",children:post.author.first_name+' '+post.author.last_name}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-6 fw-lighter\",children:/*#__PURE__*/_jsx(\"small\",{children:format(post.created)})})]})]}),user.name===post.author.name&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{as:MoreToggleIcon}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(UpdatePost,{post:post,refresh:refresh}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:handleDelete,className:\"text-danger\",children:\"Delete\"})]})]})})]}),/*#__PURE__*/_jsx(Card.Text,{children:post.body}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(LikeFilled,{style:{color:\"#fff\",backgroundColor:\"#0D6EFD\",borderRadius:\"50%\",width:\"18px\",height:\"18px\",fontSize:\"75%\",padding:\"2px\",margin:\"3px\"}}),/*#__PURE__*/_jsx(\"p\",{className:\"ms-1 fs-6\",children:/*#__PURE__*/_jsxs(\"small\",{children:[post.likes_count,\" like\"]})})]}),!isSinglePost&&/*#__PURE__*/_jsx(\"p\",{className:\"ms-1 fs-6\",children:/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsxs(Link,{to:`api/post/${post.id}/`,children:[post.comments_count,\" comments\"]})})})]})]}),/*#__PURE__*/_jsxs(Card.Footer,{className:\"d-flex bg-white w-50 justify-content-between border-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(LikeOutlined,{style:{width:\"24px\",height:\"24px\",padding:\"2px\",fontSize:\"20px\",color:post.liked?\"#0D6EFD\":\"#C4C4C4\"},onClick:()=>{if(post.liked){handleLikeClick(\"remove_like\");}else{handleLikeClick(\"like\");}}}),/*#__PURE__*/_jsx(\"p\",{className:\"ms-1\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Like\"})})]}),!isSinglePost&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(CommentOutlined,{style:{width:\"24px\",height:\"24px\",padding:\"2px\",fontSize:\"20px\",color:\"#C4C4C4\"}}),/*#__PURE__*/_jsx(\"p\",{className:\"ms-1 mb-0\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Comment\"})})]})]})]})});}export default Post;","map":{"version":3,"names":["React","useContext","format","LikeFilled","CommentOutlined","LikeOutlined","MoreOutlined","Link","Image","Card","Dropdown","randomAvatar","axiosService","getUser","UpdatePost","Context","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MoreToggleIcon","forwardRef","_ref","ref","onClick","href","e","preventDefault","children","Post","props","post","refresh","isSinglePost","setToaster","user","handleLikeClick","action","id","then","catch","err","console","error","handleDelete","delete","type","message","show","title","className","Body","Title","src","author","avatar","roundedCircle","width","height","first_name","last_name","created","name","Toggle","as","Menu","Item","Text","body","style","color","backgroundColor","borderRadius","fontSize","padding","margin","likes_count","to","comments_count","Footer","liked"],"sources":["/Users/yashrajsingh/Django App/backend/momento/src/components/posts/Post.jsx"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { format } from \"timeago.js\";\nimport { LikeFilled, CommentOutlined, LikeOutlined, MoreOutlined } from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\nimport { Image, Card, Dropdown } from \"react-bootstrap\";\nimport { randomAvatar } from \"../../utils\";\nimport axiosService from \"../../helpers/axios\";\nimport { getUser } from \"../../hooks/user.actions\";\nimport UpdatePost from \"./UpdatePost\";\nimport { Context } from \"../Layout\";\n\nconst MoreToggleIcon = React.forwardRef(({ onClick }, ref) => (\n  <a\n    href=\"#\"\n    ref={ref}\n    onClick={(e) => {\n      e.preventDefault();\n      onClick(e);\n    }}\n  >\n    <MoreOutlined />\n  </a>\n));\n\nfunction Post(props) {\n  const { post, refresh, isSinglePost } = props;\n  const { setToaster } = useContext(Context);\n\n  const user = getUser();\n\n  const handleLikeClick = (action) => {\n    axiosService\n      .post(`api/post/${post.id}/${action}/`)\n      .then(() => {\n        refresh();\n      })\n      .catch((err) => console.error(err));\n  };\n\n  const handleDelete = () => {\n    axiosService\n      .delete(`api/post/${post.id}/`)\n      .then(() => {\n        setToaster({\n          type: \"warning\",\n          message: \"Post deleted ðŸš€\",\n          show: true,\n          title: \"Post Deleted\",\n        });\n        refresh();\n      })\n      .catch(() => {\n        setToaster({\n          type: \"danger\",\n          message: \"An error occurred.\",\n          show: true,\n          title: \"Post Error\",\n        });\n      });\n  };\n\n  return (\n    <>\n      <Card className=\"rounded-3 my-4\">\n        <Card.Body>\n          <Card.Title className=\"d-flex flex-row justify-content-between\">\n            <div className=\"d-flex flex-row\">\n              <Image\n                src={post.author.avatar}\n                roundedCircle\n                width={48}\n                height={48}\n                className=\"me-2 border border-primary border-2\"\n              />\n              <div className=\"d-flex flex-column justify-content-start align-self-center mt-2\">\n                <p className=\"fs-6 m-0\">{post.author.first_name + ' ' + post.author.last_name}</p>\n                <p className=\"fs-6 fw-lighter\">\n                  <small>{format(post.created)}</small>\n                </p>\n              </div>\n            </div>\n            {user.name === post.author.name && (\n              <div>\n                <Dropdown>\n                  <Dropdown.Toggle as={MoreToggleIcon}></Dropdown.Toggle>\n                  <Dropdown.Menu>\n                    <UpdatePost post={post} refresh={refresh} />\n                    <Dropdown.Item\n                      onClick={handleDelete}\n                      className=\"text-danger\"\n                    >\n                      Delete\n                    </Dropdown.Item>\n                  </Dropdown.Menu>\n                </Dropdown>\n              </div>\n            )}\n          </Card.Title>\n          <Card.Text>{post.body}</Card.Text>\n          <div className=\"d-flex flex-row justify-content-between\">\n            <div className=\"d-flex flex-row\">\n              <LikeFilled\n                style={{\n                  color: \"#fff\",\n                  backgroundColor: \"#0D6EFD\",\n                  borderRadius: \"50%\",\n                  width: \"18px\",\n                  height: \"18px\",\n                  fontSize: \"75%\",\n                  padding: \"2px\",\n                  margin: \"3px\",\n                }}\n              />\n              <p className=\"ms-1 fs-6\">\n                <small>{post.likes_count} like</small>\n              </p>\n            </div>\n            {!isSinglePost && (\n              <p className=\"ms-1 fs-6\">\n                <small>\n                  <Link to={`api/post/${post.id}/`}>\n                    {post.comments_count} comments\n                  </Link>\n                </small>\n              </p>\n            )}\n          </div>\n        </Card.Body>\n        <Card.Footer className=\"d-flex bg-white w-50 justify-content-between border-0\">\n          <div className=\"d-flex flex-row\">\n            <LikeOutlined\n              style={{\n                width: \"24px\",\n                height: \"24px\",\n                padding: \"2px\",\n                fontSize: \"20px\",\n                color: post.liked ? \"#0D6EFD\" : \"#C4C4C4\",\n              }}\n              onClick={() => {\n                if (post.liked) {\n                  handleLikeClick(\"remove_like\");\n                } else {\n                  handleLikeClick(\"like\");\n                }\n              }}\n            />\n            <p className=\"ms-1\">\n              <small>Like</small>\n            </p>\n          </div>\n          {!isSinglePost && (\n            <div className=\"d-flex flex-row\">\n              <CommentOutlined\n                style={{\n                  width: \"24px\",\n                  height: \"24px\",\n                  padding: \"2px\",\n                  fontSize: \"20px\",\n                  color: \"#C4C4C4\",\n                }}\n              />\n              <p className=\"ms-1 mb-0\">\n                <small>Comment</small>\n              </p>\n            </div>\n          )}\n        </Card.Footer>\n      </Card>\n    </>\n  );\n}\n\nexport default Post;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}