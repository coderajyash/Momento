{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport axiosService from \"../helpers/axios\";\nfunction useUserActions() {\n  _s();\n  const navigate = useNavigate();\n  const baseURL = \"http://localhost:8000/api\";\n  return {\n    login,\n    register,\n    logout,\n    edit\n  };\n\n  // Login the user\n  function login(data) {\n    return axios.post(`${baseURL}/auth/login/`, data).then(res => {\n      // Registering the account and tokens in the store\n      setUserData(res.data);\n      navigate(\"/\");\n    });\n  }\n\n  // Register the user\n  function register(data) {\n    return axios.post(`${baseURL}/auth/register/`, data).then(res => {\n      // Registering the account and tokens in the store\n      setUserData(res.data);\n      navigate(\"/\");\n    });\n  }\n\n  // Edit the user\n  function edit(data, userId) {\n    return axiosService.patch(`${baseURL}/user/${userId}/`, data, {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      // Registering the account in the store\n      localStorage.setItem(\"auth\", JSON.stringify({\n        access: getAccessToken(),\n        refresh: getRefreshToken(),\n        user: res.data\n      }));\n    });\n  }\n\n  // Logout the user\n  function logout() {\n    localStorage.removeItem(\"auth\");\n    navigate(\"/login\");\n  }\n}\n\n// Get the user\n_s(useUserActions, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\nfunction getUser() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\")) || null;\n  if (auth) {\n    return auth.user;\n  } else {\n    return null;\n  }\n}\n\n// Get the access token\nfunction getAccessToken() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\n  return auth.access;\n}\n\n// Get the refresh token\nfunction getRefreshToken() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\n  return auth.refresh;\n}\n\n// Set the access, token and user property\nfunction setUserData(data) {\n  localStorage.setItem(\"auth\", JSON.stringify({\n    access: data.access,\n    refresh: data.refresh,\n    user: data.user\n  }));\n}\nexport { useUserActions, getUser, getAccessToken, getRefreshToken };","map":{"version":3,"names":["axios","useNavigate","axiosService","useUserActions","_s","navigate","baseURL","login","register","logout","edit","data","post","then","res","setUserData","userId","patch","headers","localStorage","setItem","JSON","stringify","access","getAccessToken","refresh","getRefreshToken","user","removeItem","getUser","auth","parse","getItem"],"sources":["/Users/yashrajsingh/Django App/momento/src/hooks/user.actions.js"],"sourcesContent":["import axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport axiosService from \"../helpers/axios\";\n\nfunction useUserActions() {\n  const navigate = useNavigate();\n  const baseURL = \"http://localhost:8000/api\";\n\n  return {\n    login,\n    register,\n    logout,\n    edit\n  };\n\n  // Login the user\n  function login(data) {\n    return axios.post(`${baseURL}/auth/login/`, data).then((res) => {\n      // Registering the account and tokens in the store\n      setUserData(res.data);\n      navigate(\"/\");\n    });\n  }\n\n  // Register the user\n  function register(data) {\n    return axios.post(`${baseURL}/auth/register/`, data).then((res) => {\n      // Registering the account and tokens in the store\n      setUserData(res.data);\n      navigate(\"/\");\n    });\n  }\n\n  // Edit the user\n  function edit(data, userId) {\n    return axiosService\n      .patch(`${baseURL}/user/${userId}/`, data, {\n        headers: {\n          \"content-type\": \"multipart/form-data\",\n        },\n      })\n      .then((res) => {\n        // Registering the account in the store\n        localStorage.setItem(\n          \"auth\",\n          JSON.stringify({\n            access: getAccessToken(),\n            refresh: getRefreshToken(),\n            user: res.data,\n          })\n        );\n      });\n  }\n\n  // Logout the user\n  function logout() {\n    localStorage.removeItem(\"auth\");\n    navigate(\"/login\");\n  }\n}\n\n// Get the user\nfunction getUser() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\")) || null;\n  if (auth) {\n    return auth.user;\n  } else {\n    return null;\n  }\n}\n\n// Get the access token\nfunction getAccessToken() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\n  return auth.access;\n}\n\n// Get the refresh token\nfunction getRefreshToken() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\n  return auth.refresh;\n}\n\n// Set the access, token and user property\nfunction setUserData(data) {\n  localStorage.setItem(\n    \"auth\",\n    JSON.stringify({\n      access: data.access,\n      refresh: data.refresh,\n      user: data.user,\n    })\n  );\n}\n\nexport { useUserActions, getUser, getAccessToken, getRefreshToken };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}