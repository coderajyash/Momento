{"ast":null,"code":"import React,{useState}from\"react\";import{Button,Modal,Form}from\"react-bootstrap\";import axiosService from\"../../helpers/axios\";import{getUser}from\"../../hooks/user.actions\";import Toaster from\"../Toaster\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CreatePost(props){const{refresh}=props;const[show,setShow]=useState(false);const[showToast,setShowToast]=useState(false);const[toastMessage,setToastMessage]=useState(\"\");const[toastType,setToastType]=useState(\"\");const[validated,setValidated]=useState(false);const[form,setForm]=useState({});const user=getUser();const handleClose=()=>setShow(false);const handleShow=()=>setShow(true);const handleSubmit=event=>{event.preventDefault();const createPostForm=event.currentTarget;if(createPostForm.checkValidity()===false){event.stopPropagation();}setValidated(true);const data={author:user.id,body:form.body};axiosService.post(\"api/post/\",data).then(()=>{handleClose();setToastMessage(\"Post created ðŸš€\");setToastType(\"success\");setForm({});setShowToast(true);}).catch(()=>{setToastMessage(\"An error occurred.\");setToastType(\"danger\");refresh();});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Form.Group,{className:\"my-3 w-75\",children:/*#__PURE__*/_jsx(Form.Control,{className:\"py-2 rounded-pill border-primary text-primary\",type:\"text\",placeholder:\"Write a post\",onClick:handleShow})}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"border-0\",children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Create Post\"})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"border-0\",children:/*#__PURE__*/_jsx(Form,{noValidate:true,validated:validated,onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Control,{name:\"body\",value:form.body,onChange:e=>setForm({...form,body:e.target.value}),as:\"textarea\",rows:3})})})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,disabled:form.body===undefined,children:\"Post\"})})]}),/*#__PURE__*/_jsx(Toaster,{title:\"Post!\",message:toastMessage,showToast:showToast,type:toastType,onClose:()=>setShowToast(false)})]});}export default CreatePost;","map":{"version":3,"names":["React","useState","Button","Modal","Form","axiosService","getUser","Toaster","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreatePost","props","refresh","show","setShow","showToast","setShowToast","toastMessage","setToastMessage","toastType","setToastType","validated","setValidated","form","setForm","user","handleClose","handleShow","handleSubmit","event","preventDefault","createPostForm","currentTarget","checkValidity","stopPropagation","data","author","id","body","post","then","catch","children","Group","className","Control","type","placeholder","onClick","onHide","Header","closeButton","Title","Body","noValidate","onSubmit","name","value","onChange","e","target","as","rows","Footer","variant","disabled","undefined","title","message","onClose"],"sources":["/Users/yashrajsingh/Django App/momento/src/components/posts/CreatePost.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Modal, Form } from \"react-bootstrap\";\nimport axiosService from \"../../helpers/axios\";\nimport { getUser } from \"../../hooks/user.actions\";\nimport Toaster from \"../Toaster\";\n\nfunction CreatePost(props) {\n  const { refresh } = props;\n  const [show, setShow] = useState(false);\n  const [showToast, setShowToast] = useState(false);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [toastType, setToastType] = useState(\"\");\n  const [validated, setValidated] = useState(false);\n  const [form, setForm] = useState({});\n\n  const user = getUser();\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const createPostForm = event.currentTarget;\n\n    if (createPostForm.checkValidity() === false) {\n      event.stopPropagation();\n    }\n\n    setValidated(true);\n\n    const data = {\n      author: user.id,\n      body: form.body,\n    };\n\n    axiosService\n      .post(\"api/post/\", data)\n      .then(() => {\n        handleClose();\n        setToastMessage(\"Post created ðŸš€\");\n        setToastType(\"success\");\n        setForm({});\n        setShowToast(true);\n      })\n      .catch(() => {\n        setToastMessage(\"An error occurred.\");\n        setToastType(\"danger\");\n        refresh();\n      });\n  };\n\n  return (\n    <>\n      <Form.Group className=\"my-3 w-75\">\n        <Form.Control\n          className=\"py-2 rounded-pill border-primary text-primary\"\n          type=\"text\"\n          placeholder=\"Write a post\"\n          onClick={handleShow}\n        />\n      </Form.Group>\n\n      <Modal show={show} onHide={handleClose}>\n        <Modal.Header closeButton className=\"border-0\">\n          <Modal.Title>Create Post</Modal.Title>\n        </Modal.Header>\n        <Modal.Body className=\"border-0\">\n          <Form noValidate validated={validated} onSubmit={handleSubmit}>\n            <Form.Group className=\"mb-3\">\n              <Form.Control\n                name=\"body\"\n                value={form.body}\n                onChange={(e) => setForm({ ...form, body: e.target.value })}\n                as=\"textarea\"\n                rows={3}\n              />\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant=\"primary\"\n            onClick={handleSubmit}\n            disabled={form.body === undefined}\n          >\n            Post\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <Toaster\n        title=\"Post!\"\n        message={toastMessage}\n        showToast={showToast}\n        type={toastType}\n        onClose={() => setShowToast(false)}\n      />\n    </>\n  );\n}\n\nexport default CreatePost;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}